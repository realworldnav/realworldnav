<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Custom components package – Shiny for Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="comp-streamlit.html" rel="next">
<link href="custom-component-one-off.html" rel="prev">
<link href="../favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-888ef42a095209a13a17dbfda2cb877d.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-06a6b8726800c70458725a52052b40c7.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script>
  // Redirect URLs like https://shiny.posit.co/py to
  // https://shiny.posit.co/py/ (with trailing slash). This is needed for
  // relative paths to work correctly. Unfortunately, Netlify cannot have a
  // redirect that adds or removes a trailing slash.
  if (
    !window.location.pathname.endsWith(".html") &&
    !window.location.pathname.endsWith("/")
  ) {
    window.location.replace(window.location.href + "/");
  }
</script>

<!-- Google Tag Manager -->
<script>
  // prettier-ignore
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KHBDBW7');
</script>
<!-- End Google Tag Manager -->

<!-- Add rel="noopener noreferrer" to each target="_blank" -->
<script type="text/javascript">
  window.addEventListener("load", () =>
    [...document.querySelectorAll("a[target=_blank]")].forEach((lnk) =>
      lnk.setAttribute("rel", "noopener noreferrer")
    )
  );
</script>
<!-- End Add rel="noopener noreferrer" to each target="_blank" -->

<script type="text/javascript">
  (function () {
    function addShinyliveEditLinks() {
      const codeWithLink = document.querySelectorAll(
        ".sourceCode[data-shinylive]"
      );
      codeWithLink.forEach((el) => {
        el.classList.add("code-with-shinylive-link");
        const url = el.dataset.shinylive;

        // <a class="edit-shinylive-button btn btn-link" href="https://shiny.posit.co/py/docs/&lt;%=&#32;app.shinylive&#32;%&gt;" data-bs-toggle="tooltip" data-bs-title="Edit in Shinylive" data-bs-placement="bottom">
        //  <i class="bi bi-lightning-fill"></i> <span class="visually-hidden">Edit in Shinylive</span>
        // </a>

        const link = document.createElement("a");
        link.classList.add("edit-shinylive-button", "btn", "btn-link");
        link.href = url;
        link.dataset.bsToggle = "tooltip";
        link.dataset.bsTitle = "Edit in Shinylive";
        link.dataset.bsPlacement = "bottom";

        const icon = document.createElement("i");
        icon.classList.add("bi", "bi-lightning-fill");
        link.appendChild(icon);

        const span = document.createElement("span");
        span.classList.add("visually-hidden");
        span.innerText = "Edit in Shinylive";
        link.appendChild(span);

        const btnCopy = el.querySelector(".code-copy-button");
        if (btnCopy) {
          btnCopy.parentElement.appendChild(link);
        } else {
          if (el.matches("pre")) {
            el.appendChild(link);
          } else {
            el.querySelector("pre").appendChild(link);
          }
        }

        if (window.bootstrap?.Tooltip) {
          new bootstrap.Tooltip(link);
        }
        el.removeAttribute("data-shinylive");
      });
    }

    function addWhatsShinyExpressTooltip() {
      const tooltipContents = `<p><strong>Shiny Express</strong> is a new, streamlined way to write a Shiny app.</p>
    <p><strong>Shiny Core</strong> refers to the original, functional Shiny syntax, which is still a great way to write Shiny apps.</p>
    <p class="fw-600" style="font-size:0.85em;"><a href="https://shiny.posit.co/blog/posts/shiny-express/">Read more <i class="bi bi-chevron-right align-text-top"></i></a></p>`;

      const tooltipDisplay = `<i class="bi bi-question-circle-fill d-inline d-sm-none"></i><span class="d-none d-sm-inline">What's this?</span>`;

      document
        .querySelectorAll(".panel-tabset.shiny-mode-tabset")
        .forEach(function (tabset) {
          const trigger = document.createElement("div");
          trigger.classList.add("what-shiny-express", "text-white");
          trigger.tabIndex = 0;
          trigger.innerHTML = tooltipDisplay;
          tabset.appendChild(trigger);

          if (!window.bootstrap?.Popover) {
            return;
          }

          new window.bootstrap.Popover(trigger, {
            html: true,
            title: "Express vs Core",
            content: tooltipContents,
            placement: "auto",
            trigger: "focus",
            container: tabset,
          });
        });
    }

    function handlePanelVariants() {
      document.querySelectorAll(".panel-pills > .nav").forEach((x) => {
        x.classList.remove("nav-tabs");
        x.classList.add("nav-pills");
      });
      document.querySelectorAll(".panel-underline > .nav").forEach((x) => {
        x.classList.remove("nav-tabs");
        x.classList.add("nav-underline");
      });
      document.querySelectorAll(".shiny-mode-tabset > .nav").forEach((x) => {
        x.classList.remove("nav-tabs");
        x.classList.add("nav-underline");
      });
    }

    function onLoad() {
      addShinyliveEditLinks();
      addWhatsShinyExpressTooltip();
      handlePanelVariants();
    }

    document.readyState === "loading"
      ? document.addEventListener("DOMContentLoaded", onLoad)
      : onLoad();
  })();
</script>

<!-- <div
  class="alert alert-primary text-center mb-0 border-0"
  style="padding: 0.6rem"
  role="alert"
>
  <p class="d-md-inline my-0 me-md-4 p-90">
    <strong>🎉 Introducing Shiny Express</strong>
  </p>
  <p class="d-md-inline my-0 p-90 me-md-4">
    A simpler way to write and learn Shiny.
  </p>
  <p class="d-md-inline my-0 p-90 me-md-4">
    <a
      href="https://shiny.posit.co/blog/posts/shiny-express/"
      target="_blank"
      style="color: #00314e"
      >Learn more</a
    >.
  </p>
</div> -->


<meta property="og:title" content="Custom components package – Shiny for Python">
<meta property="og:description" content="Build interactive web applications easily with the power of Python’s data and scientific stack.">
<meta property="og:image" content="https://shiny.posit.co/py/images/shiny-for-python.jpg">
<meta property="og:site_name" content="Shiny for Python">
<meta property="og:locale" content="es_ES">
<meta name="twitter:title" content="Shiny for Python">
<meta name="twitter:description" content="Build interactive web applications easily with the power of Python’s data and scientific stack.">
<meta name="twitter:image" content="https://shiny.posit.co/py/images/shiny-for-python.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../shiny-for-python.svg" alt="The logo for Shiny for Python" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Shiny for Python</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../get-started/index.html"> 
<span class="menu-text">Get Started</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="overview.html" aria-current="page"> 
<span class="menu-text">Concepts</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="custom-components-pkg.html#" id="nav-menu-components" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Components</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-components">    
        <li>
    <a class="dropdown-item" href="../components/index.html"><i class="bi bi-sliders" role="img">
</i> 
 <span class="dropdown-text">Components</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../layouts/index.html"><i class="bi bi-layout-text-window-reverse" role="img">
</i> 
 <span class="dropdown-text">Layouts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../templates/index.html"><i class="bi bi-code-square" role="img">
</i> 
 <span class="dropdown-text">Templates</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../gallery/index.html"> 
<span class="menu-text">Gallery</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://shinylive.io/py/examples/" target="_blank"> 
<span class="menu-text">Playground</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="custom-components-pkg.html#" id="nav-menu-reference" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Reference</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-reference">    
        <li>
    <a class="dropdown-item" href="../api/express/index.html">
 <span class="dropdown-text">Shiny Express</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../api/core/index.html">
 <span class="dropdown-text">Shiny Core</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../api/testing/index.html">
 <span class="dropdown-text">Testing</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://discord.gg/yMGCamUMnS" title="" class="quarto-navigation-tool px-1" aria-label="Shiny Discord"><i class="bi bi-discord"></i></a>
    <a href="https://github.com/posit-dev/py-shiny/" title="" class="quarto-navigation-tool px-1" aria-label="Shiny for Python Github"><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="custom-component-one-off.html"><span class="emoji-icon">🏗️</span> <strong>Extending</strong></a></li><li class="breadcrumb-item"><a href="custom-components-pkg.html">Custom components package</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text"><span class="emoji-icon">📌</span> <strong>Essentials</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="user-interfaces.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">User interfaces</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text"><span class="emoji-icon">🤖</span> <strong>Generative AI</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="genai-inspiration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Get inspired</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="genai-chatbots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chatbots</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="genai-stream.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Streaming</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="genai-tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tool calling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="genai-structured-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structured data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="genai-rag.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RAG</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text"><span class="emoji-icon">🎨</span> <strong>User interfaces</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="ui-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="jupyter-widgets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Jupyter Widgets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="ui-dynamic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dynamic UI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="ui-html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">UI as HTML</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="ui-customize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Customizing UI</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text"><span class="emoji-icon">⚡</span> <strong>Reactivity</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="reactive-foundations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Foundations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="reactive-patterns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Patterns</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="reactive-mutable.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mutable objects</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text"><span class="emoji-icon">📝</span> <strong>Syntax modes</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="express-vs-core.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Express vs.&nbsp;Core</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="express-or-core.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Choosing a syntax</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="express-in-depth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Express in depth</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="express-to-core.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Transition to Core</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text"><span class="emoji-icon">📦</span> <strong>Modules</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="modules.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Shiny Modules</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="module-communication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module Communication</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text"><span class="emoji-icon">🧪</span> <strong>Testing</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="unit-testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unit testing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="end-to-end-testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">End-to-End Testing Your App</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text"><span class="emoji-icon">🏗️</span> <strong>Extending</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="custom-component-one-off.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Custom JavaScript component</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="custom-components-pkg.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Custom components package</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text"><span class="emoji-icon">📊</span> <strong>Comparisons</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="comp-streamlit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Streamlit</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="comp-r-shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Shiny for R</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text"><span class="emoji-icon">🧩</span> <strong>Miscellaneous</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="nonblocking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Non-blocking operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="routing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Routing</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="custom-components-pkg.html#what-well-build" id="toc-what-well-build" class="nav-link active" data-scroll-target="#what-well-build">What we’ll build</a></li>
  <li><a href="custom-components-pkg.html#the-quick-version" id="toc-the-quick-version" class="nav-link" data-scroll-target="#the-quick-version">The quick version</a></li>
  <li><a href="custom-components-pkg.html#development-workflow" id="toc-development-workflow" class="nav-link" data-scroll-target="#development-workflow">Development workflow</a></li>
  <li><a href="custom-components-pkg.html#project-structure" id="toc-project-structure" class="nav-link" data-scroll-target="#project-structure">Project structure</a>
  <ul class="collapse">
  <li><a href="custom-components-pkg.html#package.json" id="toc-package.json" class="nav-link" data-scroll-target="#package.json"><code>package.json</code></a></li>
  <li><a href="custom-components-pkg.html#srctsindex.tsx" id="toc-srctsindex.tsx" class="nav-link" data-scroll-target="#srctsindex.tsx"><code>srcts/index.tsx</code></a></li>
  <li><a href="custom-components-pkg.html#fancy_color_picker" id="toc-fancy_color_picker" class="nav-link" data-scroll-target="#fancy_color_picker"><code>fancy_color_picker/</code></a></li>
  <li><a href="custom-components-pkg.html#pyproject.toml" id="toc-pyproject.toml" class="nav-link" data-scroll-target="#pyproject.toml"><code>pyproject.toml</code></a></li>
  <li><a href="custom-components-pkg.html#tsconfig.json" id="toc-tsconfig.json" class="nav-link" data-scroll-target="#tsconfig.json"><code>tsconfig.json</code></a></li>
  <li><a href="custom-components-pkg.html#example-appapp.py" id="toc-example-appapp.py" class="nav-link" data-scroll-target="#example-appapp.py"><code>example-app/app.py</code></a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/posit-dev/py-shiny-site/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li><li><a href="https://github.com/posit-dev/py-shiny-site/edit/main/docs/custom-components-pkg.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KHBDBW7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="custom-component-one-off.html"><span class="emoji-icon">🏗️</span> <strong>Extending</strong></a></li><li class="breadcrumb-item"><a href="custom-components-pkg.html">Custom components package</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Custom components package</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>While there are a large number of pre-built <a href="../components/index.html">components available for Shiny,</a> there are times when you may want to create your own. In this article we’ll walk through the process of creating a custom input component package for Shiny. We’ll be using React and Typescript to build the component, but the process is similar for other languages and frameworks.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you just want to build a one-off component for a single app, a full package may be overkill. See the accompanying article <a href="custom-component-one-off.html">Custom JavaScript component</a> for a simpler approach.</p>
</div>
</div>
<section id="what-well-build" class="level2">
<h2 class="anchored" data-anchor-id="what-well-build">What we’ll build</h2>
<p>The component we are going to build is a color picker that returns the hex-code of the chosen color as a string for the user to use in their app. The component will be built using React and Typescript and will be packaged as a python package that can be deployed to <code>pypi</code> and installed with <code>pip</code> so other users can easily use it in their apps.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The example here uses typescript. If you don’t want to use typescript, don’t worry! Javascript works just fine. To make this example JavaScript you can simply erase the type annotations, or run the typescript compiler on the source code to strip them out automatically.</p>
</div>
</div>
<p>The component itself is based on the library <a href="https://casesandberg.github.io/react-color/">react-color</a>. We’ll be using the <code>SketchPicker</code> component from that library to build our custom component. The full code is as follows.</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>srcts/index.tsx</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="srcts/index.tsx" data-code-line-numbers=""><pre class="sourceCode ts code-with-copy"><code class="sourceCode typescript"><span id="cb1-1"><a href="custom-components-pkg.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { SketchPicker } <span class="im">from</span> <span class="st">"react-color"</span><span class="op">;</span></span>
<span id="cb1-2"><a href="custom-components-pkg.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> React <span class="im">from</span> <span class="st">"react"</span><span class="op">;</span></span>
<span id="cb1-3"><a href="custom-components-pkg.html#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="custom-components-pkg.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">ColorPickerReact</span>({</span>
<span id="cb1-5"><a href="custom-components-pkg.html#cb1-5" aria-hidden="true" tabindex="-1"></a>  initialValue<span class="op">,</span></span>
<span id="cb1-6"><a href="custom-components-pkg.html#cb1-6" aria-hidden="true" tabindex="-1"></a>  onNewValue<span class="op">,</span></span>
<span id="cb1-7"><a href="custom-components-pkg.html#cb1-7" aria-hidden="true" tabindex="-1"></a>}<span class="op">:</span> {</span>
<span id="cb1-8"><a href="custom-components-pkg.html#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// The initial value for the color picker</span></span>
<span id="cb1-9"><a href="custom-components-pkg.html#cb1-9" aria-hidden="true" tabindex="-1"></a>  initialValue<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb1-10"><a href="custom-components-pkg.html#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">// A callback that should be called whenever the color is changed</span></span>
<span id="cb1-11"><a href="custom-components-pkg.html#cb1-11" aria-hidden="true" tabindex="-1"></a>  onNewValue<span class="op">:</span> (x<span class="op">:</span> <span class="dt">string</span>) <span class="kw">=&gt;</span> <span class="dt">void</span><span class="op">;</span></span>
<span id="cb1-12"><a href="custom-components-pkg.html#cb1-12" aria-hidden="true" tabindex="-1"></a>}) {</span>
<span id="cb1-13"><a href="custom-components-pkg.html#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [currentColor<span class="op">,</span> setCurrentColor] <span class="op">=</span> React<span class="op">.</span><span class="fu">useState</span>(initialValue)<span class="op">;</span></span>
<span id="cb1-14"><a href="custom-components-pkg.html#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="custom-components-pkg.html#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb1-16"><a href="custom-components-pkg.html#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>SketchPicker</span>
<span id="cb1-17"><a href="custom-components-pkg.html#cb1-17" aria-hidden="true" tabindex="-1"></a>      color<span class="op">=</span>{currentColor}</span>
<span id="cb1-18"><a href="custom-components-pkg.html#cb1-18" aria-hidden="true" tabindex="-1"></a>      onChange<span class="op">=</span>{(color) <span class="kw">=&gt;</span> {</span>
<span id="cb1-19"><a href="custom-components-pkg.html#cb1-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">setCurrentColor</span>(color<span class="op">.</span><span class="at">hex</span>)<span class="op">;</span></span>
<span id="cb1-20"><a href="custom-components-pkg.html#cb1-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">onNewValue</span>(color<span class="op">.</span><span class="at">hex</span>)<span class="op">;</span></span>
<span id="cb1-21"><a href="custom-components-pkg.html#cb1-21" aria-hidden="true" tabindex="-1"></a>      }}</span>
<span id="cb1-22"><a href="custom-components-pkg.html#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">/&gt;</span></span>
<span id="cb1-23"><a href="custom-components-pkg.html#cb1-23" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1-24"><a href="custom-components-pkg.html#cb1-24" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="custom-components-color-picker.png" class="app-screenshot pad-top img-fluid figure-img" alt="Screenshot of color picker component" width="200"></p>
<figcaption>Output of <code>ColorPickerReact</code> component</figcaption>
</figure>
</div>
</div>
<p>Your component may look very different, but at the end of the day it just needs to be a self-contained react component.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What about an output binding?
</div>
</div>
<div class="callout-body-container callout-body">
<p>This article touches on building an input component. However, it’s also possible to build output components. The process and project structure is very similar to inputs. Throughout this article look for the “What about an output binding?” tips for more information on how to build an output binding. You can generate an output template with <code>shiny create --template js-output</code>.</p>
</div>
</div>
</section>
<section id="the-quick-version" class="level2">
<h2 class="anchored" data-anchor-id="the-quick-version">The quick version</h2>
<p>If you just want to get up and running with the code, you can start with one of the available templates available with the <code>shiny create --template js-react</code> command and then run the commands provided after the template is created. You can also see the full list of JavaScript extension templates with <code>shiny create --template js-component</code>.</p>
</section>
<section id="development-workflow" class="level2">
<h2 class="anchored" data-anchor-id="development-workflow">Development workflow</h2>
<p>While there are lots of ways to develop components with live-feedback (e.g.&nbsp;Storybook, dev servers like <code>vite</code>, etc) an easy way to develop a component with our package structure is to use the example app, an editable mode pip install, and the watch mode for our build step. We can do this with the following steps:</p>
<ol type="1">
<li><p>Install the package in <a href="https://setuptools.pypa.io/en/latest/userguide/development_mode.html">“editable mode”</a> with <code>pip install -e .</code></p></li>
<li><p>Run the bundler in watch mode with <code>npm run watch</code>. This will watch the <code>srcts</code> directory for changes and automatically rebuild the JavaScript when it detects a change.</p></li>
<li><p>Run the example app in live-reload mode. If you’re using VScode, the <a href="https://marketplace.visualstudio.com/items?itemName=Posit.shiny">Shiny extension</a> enables this automatically when pressing the run button above the app script.</p></li>
</ol>
<p>Now you can update your component JavaScript/python functions and your app will automatically reload with the changes. Happy developing!</p>
<ol start="4" type="1">
<li>Once you’re happy with your component, you can deploy to PyPi. For instructions on doing this see the <a href="https://packaging.python.org/en/latest/tutorials/packaging-projects/#generating-distribution-archives">Python Packaging User Guide.</a></li>
</ol>
<p>If you want to understand what’s going on under the hood, read on!</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The component we’re creating here uses React, but there are templates for building components with plain JavaScript as well. The general concepts we talk about here apply to all of the templates so feel free to use whichever one you prefer.</p>
</div>
</div>
</section>
<section id="project-structure" class="level2">
<h2 class="anchored" data-anchor-id="project-structure">Project structure</h2>
<p>The template from above contains the color picker component above, along with all the scaffolding neccesary to build and package it as a python package.Let’s take a look at the files that are created and talk through why they are there.</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>my-color-picker/</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="my-color-picker/" data-code-line-numbers=""><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="custom-components-pkg.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> package.json</span>
<span id="cb2-2"><a href="custom-components-pkg.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> package-lock.json</span>
<span id="cb2-3"><a href="custom-components-pkg.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> srcts</span>
<span id="cb2-4"><a href="custom-components-pkg.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> └── index.tsx</span>
<span id="cb2-5"><a href="custom-components-pkg.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> example-app</span>
<span id="cb2-6"><a href="custom-components-pkg.html#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> └── app.py</span>
<span id="cb2-7"><a href="custom-components-pkg.html#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> fancy_color_picker</span>
<span id="cb2-8"><a href="custom-components-pkg.html#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── __init__.py</span>
<span id="cb2-9"><a href="custom-components-pkg.html#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── distjs</span>
<span id="cb2-10"><a href="custom-components-pkg.html#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> │&nbsp;&nbsp; └── index.js</span>
<span id="cb2-11"><a href="custom-components-pkg.html#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> └── fancy_color_picker.py</span>
<span id="cb2-12"><a href="custom-components-pkg.html#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> pyproject.toml</span>
<span id="cb2-13"><a href="custom-components-pkg.html#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> README.md</span>
<span id="cb2-14"><a href="custom-components-pkg.html#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="ex">└──</span> tsconfig.json</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="package.json" class="level3">
<h3 class="anchored" data-anchor-id="package.json"><code>package.json</code></h3>
<p>This is the standard <code>package.json</code> file for a JavaScript project. It contains the dependencies and build commands for the JavaScript code. The important sections are: - A dependency on the <code>shiny-bindings-react</code> package. This is a JavaScript package with helpers for making it easier to create input and output bindings using React. Later we use the function <code>makeReactInput()</code> from this package to make Shiny aware of the component and its role as an input binding. - <code>build</code> command. The build command (and accompanying <code>watch</code> command) use <code>esbuild</code> to transpile the typescript to JavaScript and bundle the dependencies (like <code>shiny-bindings-react</code> and <code>react</code> itself.</p>
<p>The <code>.package-lock.json</code> file is generated by npm and contains the exact versions of the dependencies used in the project. You shouldn’t need to modify this file by hand.</p>
</section>
<section id="srctsindex.tsx" class="level3">
<h3 class="anchored" data-anchor-id="srctsindex.tsx"><code>srcts/index.tsx</code></h3>
<p>This is where all the typescript/JavaScript code lives. We talked about the react component - <code>ColorPickerReact</code> - above, but it’s worth touching on the code that binds that react component with Shiny so it functions as an input:</p>
<div class="sourceCode" id="cb3" data-code-line-numbers=""><pre class="sourceCode ts code-with-copy"><code class="sourceCode typescript"><span id="cb3-1"><a href="custom-components-pkg.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { SketchPicker } <span class="im">from</span> <span class="st">"react-color"</span><span class="op">;</span></span>
<span id="cb3-2"><a href="custom-components-pkg.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="im">type</span> { ColorResult } <span class="im">from</span> <span class="st">"react-color"</span><span class="op">;</span></span>
<span id="cb3-3"><a href="custom-components-pkg.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> React <span class="im">from</span> <span class="st">"react"</span><span class="op">;</span></span>
<span id="cb3-4"><a href="custom-components-pkg.html#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="custom-components-pkg.html#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { makeReactInput } <span class="im">from</span> <span class="st">"@posit-dev/shiny-bindings-react"</span><span class="op">;</span></span>
<span id="cb3-6"><a href="custom-components-pkg.html#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="custom-components-pkg.html#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">// Generates a new input binding that renders the supplied react component</span></span>
<span id="cb3-8"><a href="custom-components-pkg.html#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">// into the root of the webcomponent.</span></span>
<span id="cb3-9"><a href="custom-components-pkg.html#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">makeReactInput</span>({</span>
<span id="cb3-10"><a href="custom-components-pkg.html#cb3-10" aria-hidden="true" tabindex="-1"></a>  tagName<span class="op">:</span> <span class="st">"fancy-color-picker"</span><span class="op">,</span></span>
<span id="cb3-11"><a href="custom-components-pkg.html#cb3-11" aria-hidden="true" tabindex="-1"></a>  initialValue<span class="op">:</span> <span class="st">"#fff"</span><span class="op">,</span></span>
<span id="cb3-12"><a href="custom-components-pkg.html#cb3-12" aria-hidden="true" tabindex="-1"></a>  renderComp<span class="op">:</span> ({ initialValue<span class="op">,</span> onNewValue }) <span class="kw">=&gt;</span> (</span>
<span id="cb3-13"><a href="custom-components-pkg.html#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>ColorPickerReact</span>
<span id="cb3-14"><a href="custom-components-pkg.html#cb3-14" aria-hidden="true" tabindex="-1"></a>      initialValue<span class="op">=</span>{initialValue}</span>
<span id="cb3-15"><a href="custom-components-pkg.html#cb3-15" aria-hidden="true" tabindex="-1"></a>      onNewValue<span class="op">=</span>{(color) <span class="kw">=&gt;</span> <span class="fu">onNewValue</span>(color)}</span>
<span id="cb3-16"><a href="custom-components-pkg.html#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">/&gt;</span></span>
<span id="cb3-17"><a href="custom-components-pkg.html#cb3-17" aria-hidden="true" tabindex="-1"></a>  )<span class="op">,</span></span>
<span id="cb3-18"><a href="custom-components-pkg.html#cb3-18" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb3-19"><a href="custom-components-pkg.html#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="custom-components-pkg.html#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">// Color Picker React component</span></span>
<span id="cb3-21"><a href="custom-components-pkg.html#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">ColorPickerReact</span>(<span class="op">...</span>) { <span class="op">...</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In here we declare the <code>tagName</code> of for our component. This name is used to generate the correct markup with python later. Under the hood <code>makeReactInput()</code> generates a <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components">webcomponent</a> to hold our input. A webcomponent is a custom HTML element that allows us to bind custom markup and JavaScript logic to a point in our app by simply writing the custom tag into the app’s HTML. The <code>tagName</code> argument provided here represents the name of that custom component we’re generating. In this case we’re registering the component as <code>&lt;fancy-color-picker&gt;</code>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This example uses the webcomponent based interface provided by the <a href="https://github.com/posit-dev/shiny-bindings/blob/main/packages/react/README.md"><code>@posit-dev/shiny-bindings-react</code> package,</a> but if you want lower level access you can use the built-in class-based interface. See the <a href="https://shiny.posit.co/r/articles/build/building-inputs/">Shiny for R documentation</a> for more details.</p>
</div>
</div>
<p>Next we provide an <code>initialValue</code> for the component. This is the value that will be used when the component is first rendered. In this case we’re using <code>#fff</code>.</p>
<p>Finally, we provide a <code>renderComp</code> function. This function is called whenever the component needs to be rendered. It is passed an object with two properties, <code>onNewValue</code> and <code>initialValue</code>. <code>onNewValue</code> is a callback that should be called whenever the value of the component changes. In this case we’re just passing the value of the color picker to the callback. This will send the value to Shiny and update the value of the input. <code>initialValue</code> is the value that should be used to initialize the component. In this case we’re just passing the value we were given to the <code>ColorPickerReact</code> component.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What about an output binding?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The component we’re building here is an input. However, you may be interested in building an output binding. There is a template for this but the process is not too different. Just instead of using <code>makeReactInput()</code> you would use <code>makeReactOutput()</code>. Here’s how we would do it for a simple output that displays a color:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>index.tsx</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="index.tsx" data-code-line-numbers=""><pre class="sourceCode ts code-with-copy"><code class="sourceCode typescript"><span id="cb4-1"><a href="custom-components-pkg.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Simple react output binding that renders a div with the background color</span></span>
<span id="cb4-2"><a href="custom-components-pkg.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">makeReactOutput</span><span class="op">&lt;</span>{ value<span class="op">:</span> <span class="dt">string</span> }<span class="op">&gt;</span>({</span>
<span id="cb4-3"><a href="custom-components-pkg.html#cb4-3" aria-hidden="true" tabindex="-1"></a>  tagName<span class="op">:</span> <span class="st">"fancy-color-shower"</span><span class="op">,</span></span>
<span id="cb4-4"><a href="custom-components-pkg.html#cb4-4" aria-hidden="true" tabindex="-1"></a>  renderComp<span class="op">:</span> ({ value }) <span class="kw">=&gt;</span> (</span>
<span id="cb4-5"><a href="custom-components-pkg.html#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>div</span>
<span id="cb4-6"><a href="custom-components-pkg.html#cb4-6" aria-hidden="true" tabindex="-1"></a>      style<span class="op">=</span>{{</span>
<span id="cb4-7"><a href="custom-components-pkg.html#cb4-7" aria-hidden="true" tabindex="-1"></a>        backgroundColor<span class="op">:</span> value<span class="op">,</span></span>
<span id="cb4-8"><a href="custom-components-pkg.html#cb4-8" aria-hidden="true" tabindex="-1"></a>        border<span class="op">:</span> <span class="st">"1px solid black"</span><span class="op">,</span></span>
<span id="cb4-9"><a href="custom-components-pkg.html#cb4-9" aria-hidden="true" tabindex="-1"></a>        height<span class="op">:</span> <span class="st">"100px"</span><span class="op">,</span></span>
<span id="cb4-10"><a href="custom-components-pkg.html#cb4-10" aria-hidden="true" tabindex="-1"></a>        width<span class="op">:</span> <span class="st">"100px"</span><span class="op">,</span></span>
<span id="cb4-11"><a href="custom-components-pkg.html#cb4-11" aria-hidden="true" tabindex="-1"></a>      }}</span>
<span id="cb4-12"><a href="custom-components-pkg.html#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">/&gt;</span></span>
<span id="cb4-13"><a href="custom-components-pkg.html#cb4-13" aria-hidden="true" tabindex="-1"></a>  )<span class="op">,</span></span>
<span id="cb4-14"><a href="custom-components-pkg.html#cb4-14" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="fancy_color_picker" class="level3">
<h3 class="anchored" data-anchor-id="fancy_color_picker"><code>fancy_color_picker/</code></h3>
<section id="distjs" class="level4">
<h4 class="anchored" data-anchor-id="distjs"><code>distjs/*</code></h4>
<p>This is where the bundled JavaScript from <code>srcts</code> gets placed. You shouldn’t ever need to modify anything in here by hand. It will be automatically generated when you run <code>npm run build</code>. It is important to note the path though, as we will need to tell Shiny where to find this JavaScript when we declare the <code>HTMLDependency</code>…</p>
</section>
<section id="fancy_color_picker.py" class="level4">
<h4 class="anchored" data-anchor-id="fancy_color_picker.py"><code>fancy_color_picker.py</code></h4>
<div class="sourceCode" id="cb5" data-code-line-numbers=""><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="custom-components-pkg.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> PurePath</span>
<span id="cb5-2"><a href="custom-components-pkg.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> htmltools <span class="im">import</span> HTMLDependency, Tag</span>
<span id="cb5-3"><a href="custom-components-pkg.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny.module <span class="im">import</span> resolve_id</span>
<span id="cb5-4"><a href="custom-components-pkg.html#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="custom-components-pkg.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># This object is used to let Shiny know where the dependencies needed to run</span></span>
<span id="cb5-6"><a href="custom-components-pkg.html#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># our component all live. In this case, we're just using a single JavaScript</span></span>
<span id="cb5-7"><a href="custom-components-pkg.html#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># file but we could also include CSS.</span></span>
<span id="cb5-8"><a href="custom-components-pkg.html#cb5-8" aria-hidden="true" tabindex="-1"></a>fancy_color_picker_deps <span class="op">=</span> HTMLDependency(</span>
<span id="cb5-9"><a href="custom-components-pkg.html#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"fancy_color_picker"</span>,</span>
<span id="cb5-10"><a href="custom-components-pkg.html#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1.0.0"</span>,</span>
<span id="cb5-11"><a href="custom-components-pkg.html#cb5-11" aria-hidden="true" tabindex="-1"></a>    source<span class="op">=</span>{</span>
<span id="cb5-12"><a href="custom-components-pkg.html#cb5-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"package"</span>: <span class="st">"fancy_color_picker"</span>,</span>
<span id="cb5-13"><a href="custom-components-pkg.html#cb5-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"subdir"</span>: <span class="bu">str</span>(PurePath(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"distjs"</span>),</span>
<span id="cb5-14"><a href="custom-components-pkg.html#cb5-14" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb5-15"><a href="custom-components-pkg.html#cb5-15" aria-hidden="true" tabindex="-1"></a>    script<span class="op">=</span>{<span class="st">"src"</span>: <span class="st">"index.js"</span>, <span class="st">"type"</span>: <span class="st">"module"</span>},</span>
<span id="cb5-16"><a href="custom-components-pkg.html#cb5-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-17"><a href="custom-components-pkg.html#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="custom-components-pkg.html#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="custom-components-pkg.html#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fancy_color_picker(<span class="bu">id</span>: <span class="bu">str</span>):</span>
<span id="cb5-20"><a href="custom-components-pkg.html#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb5-21"><a href="custom-components-pkg.html#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co">    A shiny input.</span></span>
<span id="cb5-22"><a href="custom-components-pkg.html#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb5-23"><a href="custom-components-pkg.html#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Tag(</span>
<span id="cb5-24"><a href="custom-components-pkg.html#cb5-24" aria-hidden="true" tabindex="-1"></a>        <span class="co"># This is the name of the custom tag we created with our webcomponent</span></span>
<span id="cb5-25"><a href="custom-components-pkg.html#cb5-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"fancy-color-picker"</span>,</span>
<span id="cb5-26"><a href="custom-components-pkg.html#cb5-26" aria-hidden="true" tabindex="-1"></a>        fancy_color_picker_deps,</span>
<span id="cb5-27"><a href="custom-components-pkg.html#cb5-27" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Use resolve_id so that our component will work in a module</span></span>
<span id="cb5-28"><a href="custom-components-pkg.html#cb5-28" aria-hidden="true" tabindex="-1"></a>        <span class="bu">id</span><span class="op">=</span>resolve_id(<span class="bu">id</span>),</span>
<span id="cb5-29"><a href="custom-components-pkg.html#cb5-29" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is the main python script for the package. It contains the code that tells Shiny about the component and how to render it. The important parts are:</p>
<section id="fancy_color_picker_deps" class="level5">
<h5 class="anchored" data-anchor-id="fancy_color_picker_deps"><code>fancy_color_picker_deps</code></h5>
<div class="sourceCode" id="cb6" data-code-line-numbers=""><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="custom-components-pkg.html#cb6-1" aria-hidden="true" tabindex="-1"></a>fancy_color_picker_deps <span class="op">=</span> HTMLDependency(</span>
<span id="cb6-2"><a href="custom-components-pkg.html#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"fancy_color_picker"</span>,</span>
<span id="cb6-3"><a href="custom-components-pkg.html#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1.0.0"</span>,</span>
<span id="cb6-4"><a href="custom-components-pkg.html#cb6-4" aria-hidden="true" tabindex="-1"></a>    source<span class="op">=</span>{</span>
<span id="cb6-5"><a href="custom-components-pkg.html#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"package"</span>: <span class="st">"fancy_color_picker"</span>,</span>
<span id="cb6-6"><a href="custom-components-pkg.html#cb6-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"subdir"</span>: <span class="bu">str</span>(PurePath(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"distjs"</span>),</span>
<span id="cb6-7"><a href="custom-components-pkg.html#cb6-7" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb6-8"><a href="custom-components-pkg.html#cb6-8" aria-hidden="true" tabindex="-1"></a>    script<span class="op">=</span>{<span class="st">"src"</span>: <span class="st">"index.js"</span>, <span class="st">"type"</span>: <span class="st">"module"</span>},</span>
<span id="cb6-9"><a href="custom-components-pkg.html#cb6-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This sets up an “html-dependency” for our component. HTMLDependencies are Shiny’s way of keeping track of what resources are needed for the currently displayed elements. This html dependency is telling Shiny that whenever there is a <code>fancy_color_picker</code> on the page in an app, it needs to also have the bundled JavaScript at <code>distjs/index.js</code> as well.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Here we just declare JavaScript dependencies, but you can also include style sheets with the <code>stylesheet</code> argument.</p>
</div>
</div>
</section>
<section id="fancy_color_picker-1" class="level5">
<h5 class="anchored" data-anchor-id="fancy_color_picker-1"><code>fancy_color_picker</code></h5>
<div class="sourceCode" id="cb7" data-code-line-numbers=""><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="custom-components-pkg.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fancy_color_picker(<span class="bu">id</span>: <span class="bu">str</span>):</span>
<span id="cb7-2"><a href="custom-components-pkg.html#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb7-3"><a href="custom-components-pkg.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">    A shiny input.</span></span>
<span id="cb7-4"><a href="custom-components-pkg.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb7-5"><a href="custom-components-pkg.html#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Tag(</span>
<span id="cb7-6"><a href="custom-components-pkg.html#cb7-6" aria-hidden="true" tabindex="-1"></a>        <span class="co"># This is the name of the custom tag we created with our webcomponent</span></span>
<span id="cb7-7"><a href="custom-components-pkg.html#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"fancy-color-picker"</span>,</span>
<span id="cb7-8"><a href="custom-components-pkg.html#cb7-8" aria-hidden="true" tabindex="-1"></a>        fancy_color_picker_deps,</span>
<span id="cb7-9"><a href="custom-components-pkg.html#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Use resolve_id so that our component will work in a module</span></span>
<span id="cb7-10"><a href="custom-components-pkg.html#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="bu">id</span><span class="op">=</span>resolve_id(<span class="bu">id</span>),</span>
<span id="cb7-11"><a href="custom-components-pkg.html#cb7-11" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is the actual UI function for our component. Aka the one that gets called by the user in their app’s UI to add our component to their app.</p>
<p>Because <code>makeReactInput()</code> <a href="custom-components-pkg.html#srctsindex.tsx">works by creating a webcomponent</a>, to render our input we just need to pass the tag name we set up in the <code>tagName</code> argument to <code>makeReactInput().</code> Next, we pass the <code>fancy_color_picker_deps</code> html dependency we just made and the ID of the binding and we’re good to go!</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>By using the <code>resolve_id(id)</code> function here when declaring our ID, we make sure that the component works <a href="modules.html">Shiny modules</a> where the ID of the component needs to be prefixed with the module name.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What about an output binding?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Like with the JavaScript, the process for setting up the python code for an output binding is not too different. Although there is a bit of extra work because we need to build both the ui <em>and</em> server components. Here’s how we would do that for the color shower output binding we defined above:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>fancy_color_picker.py</strong></pre>
</div>
<div class="sourceCode" id="cb8" data-filename="fancy_color_picker.py" data-code-line-numbers=""><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="custom-components-pkg.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny.render.renderer <span class="im">import</span> Renderer, Jsonifiable</span>
<span id="cb8-2"><a href="custom-components-pkg.html#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="custom-components-pkg.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> render_color(Renderer[<span class="bu">str</span>]):</span>
<span id="cb8-4"><a href="custom-components-pkg.html#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb8-5"><a href="custom-components-pkg.html#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Render a color</span></span>
<span id="cb8-6"><a href="custom-components-pkg.html#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb8-7"><a href="custom-components-pkg.html#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="custom-components-pkg.html#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Express mode UI</span></span>
<span id="cb8-9"><a href="custom-components-pkg.html#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> auto_output_ui(<span class="va">self</span>, <span class="bu">id</span>: <span class="bu">str</span>) <span class="op">-&gt;</span> Tag:</span>
<span id="cb8-10"><a href="custom-components-pkg.html#cb8-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> output_color(<span class="va">self</span>.output_id)</span>
<span id="cb8-11"><a href="custom-components-pkg.html#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="custom-components-pkg.html#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Transform the app value into a JSONifiable object</span></span>
<span id="cb8-13"><a href="custom-components-pkg.html#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">async</span> <span class="kw">def</span> transform(<span class="va">self</span>, value: <span class="bu">str</span>) <span class="op">-&gt;</span> Jsonifiable:</span>
<span id="cb8-14"><a href="custom-components-pkg.html#cb8-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> <span class="bu">isinstance</span>(res, <span class="bu">str</span>):</span>
<span id="cb8-15"><a href="custom-components-pkg.html#cb8-15" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Throw an error if the value is not a string</span></span>
<span id="cb8-16"><a href="custom-components-pkg.html#cb8-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">TypeError</span>(<span class="ss">f"Expected a string, got </span><span class="sc">{</span><span class="bu">type</span>(res)<span class="sc">}</span><span class="ss">. "</span>)</span>
<span id="cb8-17"><a href="custom-components-pkg.html#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="custom-components-pkg.html#cb8-18" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Send the results to the client. Make sure that this is a serializable</span></span>
<span id="cb8-19"><a href="custom-components-pkg.html#cb8-19" aria-hidden="true" tabindex="-1"></a>        <span class="co"># object and matches what is expected in the JavaScript code.</span></span>
<span id="cb8-20"><a href="custom-components-pkg.html#cb8-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {<span class="st">"value"</span>: value}</span>
<span id="cb8-21"><a href="custom-components-pkg.html#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="custom-components-pkg.html#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="custom-components-pkg.html#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> output_color(<span class="bu">id</span>: <span class="bu">str</span>):</span>
<span id="cb8-24"><a href="custom-components-pkg.html#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb8-25"><a href="custom-components-pkg.html#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="co">    Show a color</span></span>
<span id="cb8-26"><a href="custom-components-pkg.html#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb8-27"><a href="custom-components-pkg.html#cb8-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Tag(</span>
<span id="cb8-28"><a href="custom-components-pkg.html#cb8-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"fancy-color-shower"</span>,</span>
<span id="cb8-29"><a href="custom-components-pkg.html#cb8-29" aria-hidden="true" tabindex="-1"></a>        fancy_color_picker_deps,</span>
<span id="cb8-30"><a href="custom-components-pkg.html#cb8-30" aria-hidden="true" tabindex="-1"></a>        <span class="bu">id</span><span class="op">=</span>resolve_id(<span class="bu">id</span>),</span>
<span id="cb8-31"><a href="custom-components-pkg.html#cb8-31" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Make sure you add these to your <code>__init__.py</code> file so they are exposed to users of your package. Again, there is an output binding template in the <code>shiny create</code> menu that can get you up and running quickly.</p>
</div>
</div>
</div>
</section>
</section>
<section id="init__.py" class="level4">
<h4 class="anchored" data-anchor-id="init__.py"><code>__init__.py</code></h4>
<div class="sourceCode" id="cb9" data-code-line-numbers=""><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="custom-components-pkg.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> .fancy_color_picker <span class="im">import</span> fancy_color_picker</span>
<span id="cb9-2"><a href="custom-components-pkg.html#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="custom-components-pkg.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="va">__all__</span> <span class="op">=</span> [</span>
<span id="cb9-4"><a href="custom-components-pkg.html#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"fancy_color_picker"</span>,</span>
<span id="cb9-5"><a href="custom-components-pkg.html#cb9-5" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is how we tell python what functions/ variables our package exposes. In this case it’s a single function, <code>fancy_color_picker</code>. If you were to add more components you would also need to register them here for them to be importable by users in their apps. For more information on the structure of these files see the <a href="https://packaging.python.org/tutorials/packaging-projects/#creating-the-package-files">python docs site.</a></p>
</section>
</section>
<section id="pyproject.toml" class="level3">
<h3 class="anchored" data-anchor-id="pyproject.toml"><code>pyproject.toml</code></h3>
<p>This file is used to tell python/pypi about our package. It contains the name of the package, the version, and the dependencies. A deep dive into the structure of this file is outside the scope of this article, but you can find more information in the [Python Packaging Authority docs.]https://packaging.python.org/en/latest/guides/writing-pyproject-toml/)</p>
</section>
<section id="tsconfig.json" class="level3">
<h3 class="anchored" data-anchor-id="tsconfig.json"><code>tsconfig.json</code></h3>
<p>This file is used to configure typescript, which we are using to write our component. Like the <code>pyproject.toml</code> file, a deep dive into the structure of this file is outside the scope of this article, but you can find more information in the <a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html">typescript docs.</a></p>
</section>
<section id="example-appapp.py" class="level3">
<h3 class="anchored" data-anchor-id="example-appapp.py"><code>example-app/app.py</code></h3>
<div class="tabset-margin-container"></div><div class="panel-tabset shiny-mode-tabset" data-group="shiny-app-mode">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Express</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Core</a></li></ul>
<div class="tab-content shiny-mode-tabset" data-group="shiny-app-mode">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="sourceCode" id="cb10" data-code-line-numbers=""><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="custom-components-pkg.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fancy_color_picker <span class="im">import</span> fancy_color_picker</span>
<span id="cb10-2"><a href="custom-components-pkg.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny.express <span class="im">import</span> render</span>
<span id="cb10-3"><a href="custom-components-pkg.html#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="custom-components-pkg.html#cb10-4" aria-hidden="true" tabindex="-1"></a>fancy_color_picker(<span class="st">"myComponent"</span>)</span>
<span id="cb10-5"><a href="custom-components-pkg.html#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="custom-components-pkg.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="at">@render.text</span></span>
<span id="cb10-7"><a href="custom-components-pkg.html#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> valueOut():</span>
<span id="cb10-8"><a href="custom-components-pkg.html#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"Value from input is </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>myComponent()<span class="sc">}</span><span class="ss">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="sourceCode" id="cb11" data-code-line-numbers=""><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="custom-components-pkg.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fancy_color_picker <span class="im">import</span> fancy_color_picker</span>
<span id="cb11-2"><a href="custom-components-pkg.html#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="custom-components-pkg.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb11-4"><a href="custom-components-pkg.html#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="custom-components-pkg.html#cb11-5" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb11-6"><a href="custom-components-pkg.html#cb11-6" aria-hidden="true" tabindex="-1"></a>    fancy_color_picker(<span class="st">"myComponent"</span>),</span>
<span id="cb11-7"><a href="custom-components-pkg.html#cb11-7" aria-hidden="true" tabindex="-1"></a>    ui.output_text(<span class="st">"valueOut"</span>),</span>
<span id="cb11-8"><a href="custom-components-pkg.html#cb11-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-9"><a href="custom-components-pkg.html#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="custom-components-pkg.html#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb11-11"><a href="custom-components-pkg.html#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.text</span></span>
<span id="cb11-12"><a href="custom-components-pkg.html#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> valueOut():</span>
<span id="cb11-13"><a href="custom-components-pkg.html#cb11-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="ss">f"Value from input is </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>myComponent()<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb11-14"><a href="custom-components-pkg.html#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="custom-components-pkg.html#cb11-15" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>This is a simple example app that can be used to test the component while developing. It uses the <code>fancy_color_picker</code> function we defined in <code>fancy_color_picker.py</code> to add the component to the app. It also uses the <code>render.text</code> decorator to render the value of the input to the page.</p>
<div class="sourceCode">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="custom-components-pkg-example-app.png" class="app-screenshot img-fluid figure-img" alt="Screenshot of example app running"></p>
<figcaption>Example app running with color picker</figcaption>
</figure>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What about an output binding?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>In our output binding example we defined an output that conveniently <em>displays</em> colors. If we were packaging up two components like this we could/should modify the example app to showcase both of them.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset shiny-mode-tabset" data-group="shiny-app-mode">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Express</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Core</a></li></ul>
<div class="tab-content shiny-mode-tabset" data-group="shiny-app-mode">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>app.py</strong></pre>
</div>
<div class="sourceCode" id="cb12" data-filename="app.py" data-code-line-numbers=""><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="custom-components-pkg.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fancy_color_picker <span class="im">import</span> fancy_color_picker, render_color</span>
<span id="cb12-2"><a href="custom-components-pkg.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shiny.express</span>
<span id="cb12-3"><a href="custom-components-pkg.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="custom-components-pkg.html#cb12-4" aria-hidden="true" tabindex="-1"></a>fancy_color_picker(<span class="st">"myComponent"</span>)</span>
<span id="cb12-5"><a href="custom-components-pkg.html#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="custom-components-pkg.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="at">@render_color</span></span>
<span id="cb12-7"><a href="custom-components-pkg.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> myColor():</span>
<span id="cb12-8"><a href="custom-components-pkg.html#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">input</span>.myComponent()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>app.py</strong></pre>
</div>
<div class="sourceCode" id="cb13" data-filename="app.py" data-code-line-numbers=""><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="custom-components-pkg.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fancy_color_picker <span class="im">import</span> fancy_color_picker, output_color, render_color</span>
<span id="cb13-2"><a href="custom-components-pkg.html#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="custom-components-pkg.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, ui</span>
<span id="cb13-4"><a href="custom-components-pkg.html#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="custom-components-pkg.html#cb13-5" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb13-6"><a href="custom-components-pkg.html#cb13-6" aria-hidden="true" tabindex="-1"></a>    fancy_color_picker(<span class="st">"myComponent"</span>),</span>
<span id="cb13-7"><a href="custom-components-pkg.html#cb13-7" aria-hidden="true" tabindex="-1"></a>    output_color(<span class="st">"myColor"</span>),</span>
<span id="cb13-8"><a href="custom-components-pkg.html#cb13-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-9"><a href="custom-components-pkg.html#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="custom-components-pkg.html#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb13-11"><a href="custom-components-pkg.html#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render_color</span></span>
<span id="cb13-12"><a href="custom-components-pkg.html#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> myColor():</span>
<span id="cb13-13"><a href="custom-components-pkg.html#cb13-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">input</span>.myComponent()</span>
<span id="cb13-14"><a href="custom-components-pkg.html#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="custom-components-pkg.html#cb13-15" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<style>
/*
  Co-opt the sourceCode class for nice dropshadow to
  separate screenshot from background
*/

.sourceCode:has(.app-screenshot) {
  padding:0;

  & > p {
      margin:0;
  }

  .quarto-figure {
    margin-bottom: 0;
  }

  img {
    margin: 0;
  }

  figcaption {
      margin-inline:1rem;
      margin-block: 0.25rem;
      font-style: italic;
  }
}

.sourceCode:has(.app-screenshot.pad-top) img {
    margin-block-start: 0.5rem;
}
</style>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="custom-component-one-off.html" class="pagination-link" aria-label="Custom JavaScript component">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Custom JavaScript component</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="comp-streamlit.html" class="pagination-link" aria-label="Streamlit">
        <span class="nav-page-text">Streamlit</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Proudly supported by <a href="https://www.posit.co/" class="no-icon"><img src="../images/posit-logo-black.svg" alt="Posit" width="80" style="padding-left: 3px;vertical-align:text-top;"></a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/posit-dev/py-shiny-site/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li><li><a href="https://github.com/posit-dev/py-shiny-site/edit/main/docs/custom-components-pkg.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://discord.gg/yMGCamUMnS">
      <i class="bi bi-discord" role="img" aria-label="Shiny Discord">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/posit-dev/py-shiny/">
      <i class="bi bi-github" role="img" aria-label="Shiny for Python Github">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/posit_pbc">
      <i class="bi bi-twitter" role="img" aria-label="Posit Twitter">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/playlist?list=PL9HYL-VRX0oRbLoj3FyL5zeASU5FMDgVe">
      <i class="bi bi-youtube" role="img" aria-label="Shiny YouTube Playlist">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




<script src="../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.js" defer="true"></script>
</body></html>